<!--
═══════════════════════════════════════════════════════════════════════════════
  Live x Shop Pro - Products Page
  หน้าจัดการสินค้าและสต็อก
  พัฒนาโดย Xman Studio
═══════════════════════════════════════════════════════════════════════════════
-->
<Page x:Class="LiveXShopPro.Desktop.Views.Products.ProductsPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
      xmlns:md="http://materialdesigninxaml.net/winfx/xaml/themes"
      mc:Ignorable="d"
      d:DesignHeight="800" d:DesignWidth="1200"
      Background="Transparent"
      Title="Products">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- ═══════════════════════════════════════════════════════════════════════ -->
        <!-- Search & Actions Bar -->
        <!-- ═══════════════════════════════════════════════════════════════════════ -->
        <Grid Grid.Row="0" Margin="0,0,0,16">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <!-- Search & Filter -->
            <StackPanel Grid.Column="0" Orientation="Horizontal">
                <!-- Search Box -->
                <Border Background="{StaticResource SurfaceDark}"
                       CornerRadius="8"
                       Padding="12,8"
                       Width="400"
                       Margin="0,0,12,0">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <md:PackIcon Grid.Column="0"
                                    Kind="Magnify"
                                    Width="20" Height="20"
                                    Foreground="{StaticResource TextSecondary}"
                                    VerticalAlignment="Center"/>

                        <TextBox x:Name="SearchBox"
                                Grid.Column="1"
                                Background="Transparent"
                                BorderThickness="0"
                                FontFamily="{StaticResource SarabunRegular}"
                                FontSize="14"
                                Foreground="{StaticResource TextPrimary}"
                                md:HintAssist.Hint="ค้นหาสินค้า (ชื่อ, SKU, รหัส CF)"
                                Margin="12,0,0,0"
                                VerticalAlignment="Center"/>
                    </Grid>
                </Border>

                <!-- Category Filter -->
                <ComboBox x:Name="CategoryFilter"
                         Style="{StaticResource GlassComboBox}"
                         Width="180"
                         Margin="0,0,12,0">
                    <ComboBoxItem Content="ทุกหมวดหมู่" IsSelected="True"/>
                    <ComboBoxItem Content="เสื้อผ้า"/>
                    <ComboBoxItem Content="กระเป๋า"/>
                    <ComboBoxItem Content="รองเท้า"/>
                    <ComboBoxItem Content="เครื่องประดับ"/>
                </ComboBox>

                <!-- Stock Filter -->
                <ComboBox x:Name="StockFilter"
                         Style="{StaticResource GlassComboBox}"
                         Width="150">
                    <ComboBoxItem Content="ทุกสถานะ" IsSelected="True"/>
                    <ComboBoxItem Content="มีสินค้า"/>
                    <ComboBoxItem Content="สต็อกต่ำ"/>
                    <ComboBoxItem Content="หมด"/>
                </ComboBox>
            </StackPanel>

            <!-- Action Buttons -->
            <StackPanel Grid.Column="1" Orientation="Horizontal">
                <!-- Import -->
                <Button Style="{StaticResource SecondaryButton}"
                       Padding="12,8"
                       Margin="0,0,8,0">
                    <StackPanel Orientation="Horizontal">
                        <md:PackIcon Kind="Upload" Width="18" Height="18" Margin="0,0,6,0"/>
                        <TextBlock Text="Import"/>
                    </StackPanel>
                </Button>

                <!-- Export -->
                <Button Style="{StaticResource SecondaryButton}"
                       Padding="12,8"
                       Margin="0,0,8,0">
                    <StackPanel Orientation="Horizontal">
                        <md:PackIcon Kind="Download" Width="18" Height="18" Margin="0,0,6,0"/>
                        <TextBlock Text="Export"/>
                    </StackPanel>
                </Button>

                <!-- Add Product -->
                <Button x:Name="AddProductButton"
                       Style="{StaticResource PrimaryButton}"
                       Padding="12,8"
                       Click="OnAddProductClicked">
                    <StackPanel Orientation="Horizontal">
                        <md:PackIcon Kind="Plus" Width="18" Height="18" Margin="0,0,6,0"/>
                        <TextBlock Text="เพิ่มสินค้า"/>
                    </StackPanel>
                </Button>
            </StackPanel>
        </Grid>

        <!-- ═══════════════════════════════════════════════════════════════════════ -->
        <!-- Products Grid -->
        <!-- ═══════════════════════════════════════════════════════════════════════ -->
        <ScrollViewer Grid.Row="1"
                     VerticalScrollBarVisibility="Auto"
                     HorizontalScrollBarVisibility="Disabled">
            <ItemsControl x:Name="ProductsGrid">
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <WrapPanel/>
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>

                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <!-- Product Card -->
                        <Border Style="{StaticResource GlassCard}"
                               Width="240"
                               Margin="0,0,16,16"
                               Cursor="Hand">
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="160"/>
                                    <RowDefinition Height="*"/>
                                </Grid.RowDefinitions>

                                <!-- Product Image -->
                                <Border Grid.Row="0"
                                       Background="{StaticResource BackgroundDark}"
                                       CornerRadius="8">
                                    <md:PackIcon Kind="ImageOutline"
                                                Width="48" Height="48"
                                                Foreground="{StaticResource TextDisabled}"
                                                HorizontalAlignment="Center"
                                                VerticalAlignment="Center"/>
                                </Border>

                                <!-- Stock Badge -->
                                <Border Grid.Row="0"
                                       Background="{StaticResource Success}"
                                       CornerRadius="8"
                                       Padding="8,4"
                                       HorizontalAlignment="Right"
                                       VerticalAlignment="Top"
                                       Margin="0,8,8,0">
                                    <TextBlock Text="{Binding Stock, StringFormat=เหลือ {0}}"
                                              FontFamily="{StaticResource SarabunMedium}"
                                              FontSize="11"
                                              Foreground="White"/>
                                </Border>

                                <!-- Product Info -->
                                <StackPanel Grid.Row="1" Margin="0,12,0,0">
                                    <TextBlock Text="{Binding Name}"
                                              FontFamily="{StaticResource SarabunMedium}"
                                              FontSize="14"
                                              Foreground="{StaticResource TextPrimary}"
                                              TextTrimming="CharacterEllipsis"
                                              MaxHeight="40"/>

                                    <TextBlock Text="{Binding SKU}"
                                              FontFamily="{StaticResource SarabunRegular}"
                                              FontSize="12"
                                              Foreground="{StaticResource TextSecondary}"
                                              Margin="0,4,0,0"/>

                                    <Grid Margin="0,8,0,0">
                                        <TextBlock Text="{Binding Price, StringFormat=฿{0:N0}}"
                                                  FontFamily="{StaticResource SarabunBold}"
                                                  FontSize="18"
                                                  Foreground="{StaticResource PrimaryBrush}"/>

                                        <StackPanel Orientation="Horizontal"
                                                   HorizontalAlignment="Right">
                                            <Button Style="{StaticResource IconButton}"
                                                   Width="32" Height="32"
                                                   ToolTip="แก้ไข">
                                                <md:PackIcon Kind="Pencil" Width="16" Height="16"/>
                                            </Button>
                                        </StackPanel>
                                    </Grid>
                                </StackPanel>
                            </Grid>
                        </Border>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </ScrollViewer>

        <!-- Empty State -->
        <StackPanel x:Name="EmptyState"
                   Grid.Row="1"
                   VerticalAlignment="Center"
                   HorizontalAlignment="Center"
                   Visibility="Collapsed">
            <md:PackIcon Kind="PackageVariant"
                        Width="64" Height="64"
                        Foreground="{StaticResource TextDisabled}"
                        HorizontalAlignment="Center"/>
            <TextBlock Text="ยังไม่มีสินค้า"
                      FontFamily="{StaticResource SarabunMedium}"
                      FontSize="16"
                      Foreground="{StaticResource TextSecondary}"
                      HorizontalAlignment="Center"
                      Margin="0,16,0,8"/>
            <Button Style="{StaticResource PrimaryButton}"
                   HorizontalAlignment="Center"
                   Click="OnAddProductClicked">
                <StackPanel Orientation="Horizontal">
                    <md:PackIcon Kind="Plus" Width="18" Height="18" Margin="0,0,8,0"/>
                    <TextBlock Text="เพิ่มสินค้าแรก"/>
                </StackPanel>
            </Button>
        </StackPanel>
    </Grid>

</Page>
